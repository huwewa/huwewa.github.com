<section class="comments">

  <p>当前有 {{ site.data.size }} 条评论！</p>
  <p>当前有 {{ site.data.comments.size }} 条评论！</p>

  <p>site.data.comments {{ site.data.comments }} 条评论！</p>

  <p>site.data.comments.km_run {{ site.data.comments.km_run }} 条评论！</p>

  <p>site.data.comments.km_run.size {{ site.data.comments.km_run.size }} 条评论！</p>

  <p>page.slug {{ page.slug }} ！</p>

  {% assign cinx = 0 %}
  <p>cinx {{ cinx }} ！</p>

  {% if site.data.comments[cinx] %}

    <!-- Existing comments -->
    <hr>
    <div class="comments__existing">
    <h2>Questions</h2>
    {% assign comments = site.data.comments[cinx] | where_exp: "item", "item.replying_to == ''" %}
    {% assign comments_by_date = comments | sort: 'date' | reverse %}

    <!-- List main comments in reverse date order, newest first. List replies in date order, oldest first. -->
    {% for comment in comments_by_date %}
      {% assign index       = forloop.length | plus: 1 | minus: forloop.index %}
      {% assign r           = comment.replying_to %}
      {% assign replying_to = r | to_integer %}
      {% assign email       = comment.email %}
      {% assign name        = comment.name %}
      {% assign url         = comment.url %}
      {% assign date        = comment.date %}
      {% assign message     = comment.message %}
      {% include comment.html index=index replying_to=replying_to email=email name=name url=url date=date message=message %}
    {% endfor %}
    </div>    
  {% endif %}

  <!-- New comment form -->
  <div id="respond" class="comment__new">
    {% include comment_form.html %}
  </div>
</section>